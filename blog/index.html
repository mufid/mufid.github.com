
<!--


















                                                  hai :)
                                                  apa kabar? : )




















-->
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Mufid's Code blog</title>
  <meta name="author" content="Mufid">

  
  <meta name="description" content="Cara-cara: Siapkan mesin baru
Backup data dari mesin lama
Restore data ke mesin baru
Done ">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mufid.github.io/">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <script src="/blog/javascripts/ender.js"></script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  <link href="/atom.xml" rel="alternate" title="Mufid's Code blog" type="application/atom+xml">
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="https://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-61504096-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">fidz</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/blog/">Mufid's Code blog</a></h1>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mufid.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2019/moving-wordpress-16-04/">Memindahkan Data Wordpress Pada Apache dan Ubuntu 16.04</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2019-11-27T15:34:00+00:00" pubdate data-updated="true">Nov 27<span>th</span>, 2019</time>
        
         | <a href="/blog/2019/moving-wordpress-16-04/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Cara-cara:</p>

<ul>
<li>Siapkan mesin baru</li>
<li>Backup data dari mesin lama</li>
<li>Restore data ke mesin baru</li>
<li>Done</li>
</ul>


</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2019/moving-wordpress-16-04/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2019/rails-static-router/">Rails Static Router</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2019-09-28T15:34:00+00:00" pubdate data-updated="true">Sep 28<span>th</span>, 2019</time>
        
         | <a href="/blog/2019/rails-static-router/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One year ago, I need to serve single page on asset folder in my Rails application. However,
I can&rsquo;t use Nginx to directly serve the file since preprocessing is required by Rack middleware.
Also, all of the assets is served via CDN and I can&rsquo;t simply redirect the path into CDN, as
JEB path my change dependencing on CDN configuration.
Then I found following <a href="https://stackoverflow.com/questions/12608424/serving-static-html-in-rails-with-a-layout-file">StackOverflow question</a>:</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2019/rails-static-router/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2018/email-phising/">Mendapatkan Surel (Email) Phising</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2018-10-11T07:40:00+00:00" pubdate data-updated="true">Oct 11<span>th</span>, 2018</time>
        
         | <a href="/blog/2018/email-phising/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Ini pertama kalinya saya mendapatkan surel Phising. Surel
Phising ini sendiri adalah sebuah surel yang mirip
seolah-olah seperti surel asli dengan tujuan mencuri
data pengguna. Kalau di SMS, ini mirip seperti &ldquo;SELAMAT!
NOMOR ANDA MENDAPAT HADIAH.&rdquo; Padahal hadiahnya tidak ada.</p>

<p><img src="/blog/images/post/phising-1.png" alt="Phising 1" />
<img src="/blog/images/post/phising-2.png" alt="Phising 2" />
<img src="/blog/images/post/phising-3.png" alt="Phising 3" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2017/internet-positif-dns/">Internet Positif, DNSCrypt, dan Internet yang Terkesan Melambat</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2017-02-12T15:30:00+00:00" pubdate data-updated="true">Feb 12<span>th</span>, 2017</time>
        
         | <a href="/blog/2017/internet-positif-dns/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Masih ingat kasus pemblokiran Twitter di Turki?</p>

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Twitter is blocked in Turkey. On the streets of Istanbul, the action against censorship is graffiti DNS addresses. <a href="http://t.co/XcsfN7lJvS">pic.twitter.com/XcsfN7lJvS</a></p>&mdash; Utku Can (@utku) <a href="https://twitter.com/utku/status/446956710502993920">March 21, 2014</a></blockquote>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2017/internet-positif-dns/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2017/thermofidz/">Thermofidz: Membaca Temperatur dengan Raspberry PI</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2017-02-07T15:30:00+00:00" pubdate data-updated="true">Feb 7<span>th</span>, 2017</time>
        
         | <a href="/blog/2017/thermofidz/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Latar Belakang</h2>

<p>Pada kesempatan kali ini saya iseng luar biasa ingin membuat termometer yang
tersambung ke cloud. Istilah kerennya, &ldquo;Internet of Things.&rdquo; Ide ini muncul
karena akhir-akhir ini suhu udara tidak menentu. Terkadang saya gerah sekali
ketika malam hari. Saya memiliki termometer &ldquo;offline&rdquo; yang selalu memberi tahu
saya saat ini suhu udaranya berapa. Saya memiliki hipotesis, saya akan sangat
gerah dan berkeringat luar biasa jika suhu udara di atas 32 derajat celcius dan
saya akan merasa sejuk jika suhu udara di bawah 28 derajat celcius.</p>

<p>Untuk memvalidasi hipotesis saya, tentu saja saya perlu memiliki catatan berapa
suhu saat ini pada setiap waktu. Sayang sekali, termometer offline seharga
Rp30.000an ini tidak memiliki catatan. Andai ada sebuah termometer yang
memiliki catatan dan disimpan ke berkas, itu akan sangat membantu. Akhirnya
tercetuslah ide membuat termometer sendiri.</p>

<h2>Peralatan</h2>

<p>Saya mengikuti tutorial dari <a href="https://learn.adafruit.com/adafruits-raspberry-pi-lesson-11-ds18b20-temperature-sensing/hardware">Adafruit</a>
mengenai cara membaca temperatur dengan Raspberry. Di tutorial tersebut,
mereka menggunakan sensor DS18B20. Saya segera mencari sensor tersebut di
<a href="https://www.bukalapak.com/products/s?search%5Bkeywords%5D=ds18b20">Bukalapak</a>.
di sana kita akan menemukan banyak produk, tetapi banyak pelapak yang tidak
aktif juga. Saya kemarin membeli di <a href="https://www.bukalapak.com/p/rumah-tangga/elektronik-1111/lain-lain-220/lmm0-jual-sensor-suhu-ds18b20">lapak yang ini</a>.
Dan iya, harga sensornya Rp30.000an &mdash; sudah sama mahalnya dengan termometer
offline yang saya beli.</p>

<p>Kemudian saya membeli breadboard di <a href="https://www.tokopedia.com/pcmelektrobik">toko elektronik dekat kantor</a>.
Harganya Rp27.000. Saya juga membeli satu paket resistor Sparksfun di
<a href="http://www.famosastudio.com/resistor-kit-025w-500-total">Famosa Studio</a>. Dengan
peralatan yang sudah siap di tangan, saya bisa mengikuti tutorial dari Adafruit.
Skematik yang diberikan cukup straightforward. Tada, ini dia hasilnya.</p>

<p>!!!!!!!!!!!!!!!!!! photos goes here</p>

<h2>Konfigurasi Raspberry</h2>

<p>Selanjutnya adalah menyiapkan Raspberry. Saat itu saya mencoba dengan Raspberry
generasi awal tipe B dengan memori 256 MB. Kemudian agar tidak lambat updatenya,
saya memasang Raspbian versi terbaru ke SD Card dengan Win32DiskImager. Begitu
saya tancap kabel power, Raspberry tidak tersambung ke jaringan. Bahkan dia
tidak hidup, hanya ada 1 LED merah yang menyarah (power) dabntidak ada
tanda-tanda kehidupan. Ups.</p>

<p>Penasaran, saya pindahkan SD Card ke Raspberry PI saya yang satu lagi yang
berukuran 512 MB. Hidup! Ada aktivitas disk! Ada aktivitas jaringan, tetapi
gagal saya ssh. Ups. Saya coba login manual dengan menancapkan kabel HDMI ke
monitor dan menancapkan kabel keyboard USB. Usut punya usut, ternyata SSH
daemon harus diaktifkan secara manual. Oh. Oke, perkara sederhana.</p>

<p>Meski demikian, saya masih penasaran mengapa versi terbaru tidak jalan di model
256 MB. Oleh karenanya saya coba memasang versi yang berbeda di SD Card dan
mencoba menancapkannya di masing-masing Raspberry yang saya miliki. Berikut
hasilnya:</p>

<table>
<thead>
<th>Model/Konfigurasi</th>
<th>2016-03-18-raspbian-jessie-lite</th>
<th>2017-01-11-raspbian-jessie-lite</th>
</thead>
<tbody>
<tr>
<td>Raspbery PI B (Gen. 1) 256 MB</td>
<td>Jalan</td>
<td>Tidak mau hidup, layar boot tidak muncul</td>
</tr>
<tr>
<td>Raspbery PI B (Gen. 1) 512 MB</td>
<td>Jalan</td>
<td>Jalan</td>
</tr>
</tbody>
</table>


<p>Hmmmm. Cukup. Aneh. Entah saya yang terburu-buru, atau memang ada galat di
versi terbaru. Saya tidak yakin yang terakhir. Tapi saya sudah melakukan
rewrite berulang-ulang ke SD Card saya dan hasilnya sama saja. Oke, kita
settle-kan saja dengan yang 512 MB dulu.</p>

<p>Tutorial dari Adafruit cukup straightforward. Akan tetapi script Python nya
terlalu panjang untuk saya. Saya akhirnya membuat Bash Script sederhana seperti
ini:</p>

<pre><code>$ cat worker.sh
#!/bin/bash

TARGET=$(find /sys/devices/w1_bus_master1/28* | grep w1_slave)
TEMP=$(cat $TARGET | grep -o 't=.*')
echo "Temperature reading is: $TEMP"
</code></pre>

<p>Mari kita lihat hasilnya</p>

<pre><code>$ bash worker.sh
Temperature reading is: t=29250
</code></pre>

<p>Woow berjalan dengan sempurna! Baiklah, seharusnya, saya tinggal membuat Cronjob
kemudian menyimpan hasilnya ke berkas file. Jadilah sebuah pencatat temperatur.
Kendati demikian, saya ingin membuat hal yang lebih menarik yaitu menyambungkan
perangkat ini ke Cloud. Oleh karena saya malas membuat basis data yang kompleks,
saya memilih untuk menggunakan Git saja.</p>

<p>Sementara, hasil bacaan dari temperatur dapat dilihat pada akun Github saya:</p>

<p><a class="embedly-card" href="http://github.com/mufid/thermofidz">mufid/thermofidz</a></p>

<script async src="/blog//cdn.embedly.com/widgets/platform.js" charset="UTF-8"></script>


<p>Btw, ini hasil rangkaiannya. Tidak jauh berbeda dengan yang ditunjukkan oleh
Adafruit:</p>

<p><img src="/blog/images/post/raspi-temp-electronics.jpg" alt="Hasil Utak Atik" /></p>

<p>Yak, begitulah.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2016/rails-batch-performance/">Benchmarking ActiveRecord Load: #find_in_batches (or #find_each) and #each For Processing Bulk Records</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2016-12-15T15:00:00+00:00" pubdate data-updated="true">Dec 15<span>th</span>, 2016</time>
        
         | <a href="/blog/2016/rails-batch-performance/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Currently i am building a small enough Rails application, but somehow on some
endpoints, we process and iterate 10k records on a single request. Sure i am
caching all of those requests, but 870ms response time for first request is
still unacceptable for me.</p>

<p>Some says it is problem with the JSON rendering. Then i installed oj gem, but
the request didn&rsquo;t get a noticable faster rendering. And then i deleted all
JSON rendering, the request still on 800-ish ms response time. All of these
findings suggest me that the problem is in the model / query itself.</p>

<p>When processing much records, it would be very easy to get out of memory
problem if it is being done incorrectly. By default, when using <code>#each</code> method,
Rails will load <em>all records</em> with specified filters (<code>where</code>, scope, etc)
<em>into memory</em>. Thus, Rails&#8217; recommendation is to use <code>find_each</code> command,
which internally using <code>find_in_batches</code> method. <code>find_in_batches</code> will not
try to load all matched records in memory. Instead, it will load records by
batch.</p>

<p>The thing is, i was using <code>find_each</code>, but somehow, i was stuck on 2 seconds
request. I think the problem was the <code>find_in_batches</code> so i changed the
implementation to use <code>find_in_batches</code>. However, this way didn&rsquo;t help me.
I still got 800-ish ms response time.</p>

<p>Somehow, i was curious, was the problem is inside the find_in_batches? Or
is it in the Ruby yield and loop? I am not sure since computer nowadays have
gigahertz of computing power. However, i did the benchmark and the benchmark
looks like this:</p>

<pre><code>class Metadata &lt; ApplicationRecord
  def build_summary
    points = Metadata.where('retrieved_at &gt; \'2000-01-01 00:00:00\'')

    logger.info 'Benchmark: #find_in_batches'
    logger.info begin
      Benchmark.measure do
        points.find_in_batches do |dp|
          logger.info "End finding batches. Found: #{dp.count}"
        end
      end
    end

    logger.info 'Benchmark: #all'
    logger.info begin
      Benchmark.measure do
        points.each do |dp|
          # yield nothing
        end
      end
    end

    logger.info 'Benchmark: 10k loop'
    logger.info begin
      Benchmark.measure do
        (1..10_000).each do |i|
          # yield no one
        end
      end
    end
  end
end
</code></pre>

<p>I added &lsquo;normal&rsquo; loop, just curious if the problem is inside the
Ruby&rsquo;s interpreter.</p>

<p>Here is the result. I did this on Dual Core 4 GB RAM Virtualbox inside Intel
Core i5 with 16 GB RAM. I used Ruby 2.3.1 and Rails 5.0.0.1. For database, i
use PostgreSQL 9.6.</p>

<pre><code>I, [2016-12-15T14:56:37.463516 #28376]  INFO -- : Benchmark: #find_in_batches
I, [2016-12-15T14:56:37.511837 #28376]  INFO -- : End finding batches. Found: 1000
D, [2016-12-15T14:56:37.516353 #28376] DEBUG -- :   Metadata Load (3.2ms)
I, [2016-12-15T14:56:37.550252 #28376]  INFO -- : End finding batches. Found: 1000
D, [2016-12-15T14:56:37.553774 #28376] DEBUG -- :   Metadata Load (2.8ms)
I, [2016-12-15T14:56:37.596984 #28376]  INFO -- : End finding batches. Found: 1000
D, [2016-12-15T14:56:37.603011 #28376] DEBUG -- :   Metadata Load (5.4ms)
I, [2016-12-15T14:56:37.645731 #28376]  INFO -- : End finding batches. Found: 1000
D, [2016-12-15T14:56:37.652892 #28376] DEBUG -- :   Metadata Load (6.5ms)
I, [2016-12-15T14:56:37.692978 #28376]  INFO -- : End finding batches. Found: 1000
D, [2016-12-15T14:56:37.696923 #28376] DEBUG -- :   Metadata Load (3.1ms)
I, [2016-12-15T14:56:37.738265 #28376]  INFO -- : End finding batches. Found: 1000
D, [2016-12-15T14:56:37.742807 #28376] DEBUG -- :   Metadata Load (3.5ms)
I, [2016-12-15T14:56:37.787560 #28376]  INFO -- : End finding batches. Found: 1000
D, [2016-12-15T14:56:37.792086 #28376] DEBUG -- :   Metadata Load (3.1ms)
I, [2016-12-15T14:56:37.828058 #28376]  INFO -- : End finding batches. Found: 1000
D, [2016-12-15T14:56:37.836220 #28376] DEBUG -- :   Metadata Load (7.2ms)
I, [2016-12-15T14:56:37.907940 #28376]  INFO -- : End finding batches. Found: 1000
D, [2016-12-15T14:56:37.911302 #28376] DEBUG -- :   Metadata Load (2.8ms)
I, [2016-12-15T14:56:37.943847 #28376]  INFO -- : End finding batches. Found: 1000
D, [2016-12-15T14:56:37.945335 #28376] DEBUG -- :   Metadata Load (0.9ms)
I, [2016-12-15T14:56:37.949258 #28376]  INFO -- : End finding batches. Found: 157
I, [2016-12-15T14:56:37.949421 #28376]  INFO -- :   0.330000   0.010000   0.340000 (  0.485759)
I, [2016-12-15T14:56:37.949613 #28376]  INFO -- : Benchmark: #all
D, [2016-12-15T14:56:37.991020 #28376] DEBUG -- :   Metadata Load (40.9ms)
I, [2016-12-15T14:56:38.218292 #28376]  INFO -- :   0.220000   0.000000   0.220000 (  0.268597)
I, [2016-12-15T14:56:38.218840 #28376]  INFO -- : Benchmark: 10k loop
I, [2016-12-15T14:56:38.219272 #28376]  INFO -- :   0.000000   0.000000   0.000000 (  0.000362)
</code></pre>

<p>Sure it is not the Ruby&rsquo;s interpreter problem since vanilla 10k loop only took
0.3 msec. Comparable to native speed, huh? But we found several interesting
findings:</p>

<ul>
<li>using #each is faster than using #find_in_batches (480 ms to 260 ms)</li>
<li>&hellip; What &ldquo;{Model} Load (some ms)&rdquo; means? It does not even reflect the real
load time. &ldquo;Metadata Load 40.9 ms&rdquo;, meanwhile the real load time is 268 ms.
If we compare from logger timestamp, it is also around 268 ms (38.218 &ndash; 37.949).
Seems like internally they use different measurement tip.</li>
<li>For each group in find_in_batches, the &ldquo;Metadata Load&rdquo; itself does not reflect
the real time to yield the method. If we compare each DEBUG line, it will be
around 40ms (e.g.: Look 37.550252 &ndash; 37.516353), pretty far from 3.2ms.</li>
</ul>


<p>So what is my solution for processing 10k records? I don&rsquo;t know. The page itself
will rarely change, so caching the request will help it much. But i am still
curious, why processing only 10k records can took up to 800ms.</p>

<p>Also, i am still curious why &ldquo;Model Load&rdquo; says faster than the time it is
actually need. It took 40ms between yield but it says loaded in 3.2ms.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2016/fr-harapan/">FR: Sebuah Prediksi Cuaca yang Tidak Berlaku untuk Pulau Harapan</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2016-12-08T14:00:00+00:00" pubdate data-updated="true">Dec 8<span>th</span>, 2016</time>
        
         | <a href="/blog/2016/fr-harapan/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Jadi, <a href="http://peentar.id">kantor saya yang sekarang</a> mengadakan acara jalan-jalan ke Pulau Harapan.
Kali ini agak berbeda dengan <a href="https://mufid.github.io/blog/2013/fr-jogja/">FR saya sebelumnya</a>, saya
<em>tidak</em> akan menulis tentang harga sama sekali karena semua akomodasi dibayarkan oleh kantor.</p>

<blockquote><p>Catatan: FR ini akan diperbarui lagi ketika foto sudah diunggah <s>dan jika saya tidak malas</s>.</p></blockquote>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2016/fr-harapan/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2016/spreadsheet-js/">Lembar Kerja dalam Tiga Puluh Baris Javascript</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2016-10-25T08:00:00+00:00" pubdate data-updated="true">Oct 25<span>th</span>, 2016</time>
        
         | <a href="/blog/2016/spreadsheet-js/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/blog/images/post/spreadsheet-js.gif" alt="Spreadsheet" /></p>

<p>Saya menjelajahi kembali beberapa tautan yang ada di penanda saya. Saya menemukan
tautan yang sangat menarik beberapa tahun lampau: membuat lembar kerja dalam 30
baris di Javascript. Woh!</p>

<p>Baiklah, untuk membuat cerita lebih pendek, saya melihat kembali dimana keajaiban
baris kode tersebut. Anda dapat melihat kode sumber aslinya di <a href="http://jsfiddle.net/ondras/hYfN3/">Codepen</a>
(via <a href="https://news.ycombinator.com/item?id=6725387">HN</a>). Pertanyaan saya ada
dua:</p>

<ul>
<li>Bagaimana menyelesaikan formula di sana?</li>
<li>Bagaimana <em>dependency resolution</em> antar sel di lembar kerja tersebut?</li>
</ul>


<p>Mari kita bahas yang pertama. Ini menjadi hal yang menarik bagi saya karena
penyelesaian formula berarti Anda membuat DSL sendiri, menerjemahkannya, dan
mengeksekusinya. DSL yang digunakan oleh semua program lembar kerja serupa.
DSL yang digunakan juga dekat dengan bahasa pemrograman pada umumnya. Ya,
menguraikan formula menjadi hal yang dimengerti dan dieksekusi oleh mesin
bukanlah hal yang sederhana.</p>

<p>Ternyata, program Javascript ini tidak memiliki DSL sendiri. Alih-alih,
program ini menggunakan perintah <code>eval</code> sederhana untuk menguraikan
dan mengeksekusi formulanya. Yup, tentu saja jika Anda memasukkan
perintah Javascript yang aneh-aneh &mdash;&ndash; bukan bentuk formula lembar
kerja pada umumnya &mdash;&ndash; Anda akan menemukan sedikit kejanggalan. Anda
dapat memberikan perintah <code>alert</code> pada perintahnya dan <code>alert</code> akan
bena-benar muncul. Tentu saja bukan suatu hal yang akan Anda lakukan
pada mesin produksi, tetapi ini sudah sangat baik sebagai sebuah PoC.</p>

<p>Mari kita bahas yang kedua: bagaimana <em>dependency resolution</em> dilakukan?
Anggap saya memiliki sel A1 berisi <code>=B2 * 5</code> dan B2 yang berisi <code>=100*C2</code>
dan C2 yang berisi <code>99</code>? Bagaimana penyelesaian keterkaitan formula
yang berbeda sel? Ah, &ldquo;keajaiban&rdquo; bahasa yang interpret di sini.</p>

<p>Anda dapat melihat di kode tersebut: ada perintah yang membuat property.
Lihat pada bagian ini:</p>

<pre><code>var getter = function() {
    var value = localStorage[elm.id] || "";
    if (value.charAt(0) == "=") {
        with (DATA) return eval(value.substring(1));
    } else { return isNaN(parseFloat(value)) ? value : parseFloat(value); }
};
Object.defineProperty(DATA, elm.id, {get:getter});
Object.defineProperty(DATA, elm.id.toLowerCase(), {get:getter});
</code></pre>

<p>Ini adalah dokumentasi dari <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty">MDN</a>:</p>

<blockquote><p>Object.defineProperty(obj, prop, descriptor)</p>

<p>Parameters</p>

<ul>
<li>obj<br/>
The object on which to define the property.</li>
<li>prop<br/>
The name of the property to be defined or modified.</li>
<li>descriptor<br/>
The descriptor for the property being defined or modified.</li>
</ul>
</blockquote>

<p>Jadi, pada dasarnya, <code>eval</code> akan dilakukan dengan property di dalam
object bernama <code>DATA</code>. Property-nya sendiri bersifat dinamis, di dalam
fungsi. Properti baru benar-benar didapatkan nilainya apa ketika dieksekusi.
Jadi, sebenarnya yang melakukan dependency resolution adalah <code>eval</code> itu sendiri.
Program ini tidak benar-benar membuat <em>dependency graph</em> seperti yang
saya bayangkan sebelumnya.</p>

<p>Sebagai contoh, ada formula <code>=A9*Math.cos(B2)</code>. Yang terjadi adalah Javascript
<code>eval</code> akan mengevaluasi <code>A9 * Math.cos(B2)</code> ke dalam sel tersebut. <code>Math.cos</code>
adalah fungsi bawaan Javascript sehingga tidak perlu dipertanyakan. Bagaimana
dengan A9 dan B2? Dua variabel tersebut adalah property dalam objek <code>DATA</code>
yang dapat diakses tanpa mengetikkan <code>DATA</code> berkat idiom <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/with">with</a>. Apa nilai A9 dan B2? Belum tahu. Akan tetapi,
karena A9 dan B2 itu sendiri merupakan property yang memiliki getter sendiri,
maka kemudian <code>eval</code> akan mengeksekusi <code>DATA.A9</code>  dan <code>DATA.B2</code> &mdash; yang mana
di dalam property tersebut akan melakukan <code>eval</code> lagi jika diawali dengan <code>=</code>.</p>

<p>Bagaimana jika ada <em>circular reference</em>? Ini diakali dengan <em>try-catch</em>
sederhana berikut:</p>

<pre><code>INPUTS.forEach(function(elm) { try { elm.value = DATA[elm.id]; } catch(e) {} });
</code></pre>

<p>Jika terdapat <code>circular reference</code>, call-stack akan menjadi sangat panjang.
Bayangkan B2 menggunakan nilai dari A1 dan A1 menggunakan nilai dari B2.
Akan terjadi sebuah pemanggilan fungsi <code>getter</code> terhadap dua sel berbeda
yang tidak ada habisnya. Ketika call stack sangat panjang, interpreter akan
menghasilkan exception, yang ditangkap, dan diabaikan.</p>

<p>Saya rubah kode asli agar menangkap exception dan mencetaknya. Beriktu hasilnya:</p>

<p><img src="/blog/images/post/spredsheet-js-too-much-recursion.png" alt="Recursion" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2016/dpi-resolution/">Resolusi Monitor dan DPI</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2016-10-05T08:00:00+00:00" pubdate data-updated="true">Oct 5<span>th</span>, 2016</time>
        
         | <a href="/blog/2016/dpi-resolution/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Saya sudah berencana sejak lama sekali untuk mengganti monitor saya dari 17&#8221; dengan resolusi 1440x900
yang menurut saya cukup kekecilan untuk mata saya. Jika resolusi 17&#8221; tersebut kekecilan, berapa yang
&ldquo;tidak kekecilan&rdquo; bagi saya? Untuk itu, saya perlu mendefinisikan apa itu &ldquo;kekecilan.&rdquo;</p>

<p>&ldquo;Terlalu kecil&rdquo; terkait dengan ukuran teks-teks yang ada di layar. Itu definisi &ldquo;terlalu kecil&rdquo; yang
cukup jelas. Baiklah, question time! Pastinya akan muncul pertanyaan, &ldquo;kalau teksnya kekecilan, ya
yang digedein teksnya! Bukan monitornya!&rdquo; Tepat sekali. Itulah yang dilakukan para pengguna Mac
Retina Display. Di MBPr, ada setting bernama &ldquo;scaled resolution&rdquo; yang melakukan emulasi resolusi
layar ke resolusi &ldquo;yang diinginkan&rdquo;. Sekali lagi, ini emulasi. Yang di-render sebenarnya tetap
resolusi native. Oleh karena itulah, kalau mengembangkan aplikasi untuk Mac, kita perlu menyertakan
raster untuk DPI yang berbeda &mdash; agar hasil rendernya optimal.</p>

<p>Sayang sekali, emulasi resolusi (&ldquo;scaled resolution&rdquo;) hanya ada di Mac. Android memang memiliki
fitur membesarkan ukuran teks, tetapi hanya teks. Untuk memperburuk suasana, tidak semua aplikasi
<em>respect</em> dengan setelan ukuran teks ini. Alasannya karena layout nya nanti rusak, katanya.</p>

<p>Windows juga memiliki fitur &ldquo;membesarkan ukuran&rdquo;. Sayang sekali, pengaturan ini tidak berjalan
dengan semestinya. Beberapa program malah rusak dan tidak <em>respect</em> dengan setelan ini.</p>

<p>Oleh karena itu, daripada bergantung dengan software dan saya belum bisa mengafford Mac, jadi
lebih baik saya mencari monitor yang menghasilkan teks yang lebih besar. Dan tentu saja, space
yang lebih lega &mdash; akan tetapi ukuran teks yang lebih besar menjadi penting.</p>

<p>Ukuran teks bisa dinilai dari ppi. Makin tinggi angka ppi, maka makin kecil piksel yang dihasilkan,
maka makin kecil ukuran teksnya. Oleh karena itu, saya perlu mengukur berapa &ldquo;ppi&rdquo; yang pas
untuk saya. Setelah melihat banyak sekali monitor, saya layar 19&#8221; dengan resolusi 1440x900 sangat
cocok untuk mata saya. Ukurannya enggak bikin sakit untuk dilihat dalam waktu lama. Akan tetapi,
ruang 1440x900 terlalu kecil untuk saya, maka saya perlu mencari ruang yang lebih besar.</p>

<p>Jadi, saya akan mencari monitor dengan ppi yang lebih rendah / mendekati ppi monitor 1440x900 di
19&#8221; dengan resolusi yang lebih tinggi. Awalnya, saya sangat kesemsem dengan layar 2K di
ukuran 27&#8221;. Akan tetapi, setelah mengetahui harga monitor 4K tidak jauh berbeda, saya jadi
kesemsem juga.</p>

<p>Sayang sekali, ketika melihat ppi nya, saya kecewa. Berikut rangkuman kalkulasi PPI nya:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>1440x900
</span><span class='line'>  - 17: 99 &lt;--- Terlalu kecil
</span><span class='line'>  - 19: 89 &lt;--- Ideal
</span><span class='line'>
</span><span class='line'>1920x1080
</span><span class='line'>  - 22: 100
</span><span class='line'>  - 23: 95 &lt;-- Terlihat acceptable
</span><span class='line'>  - 24: 91 &lt;-- Sepertinya cukup
</span><span class='line'>  - 25: 88 &lt;-- Ideal
</span><span class='line'>  - 27: 81 &lt;-- Terlalu besar? Kecuali meja saya juga panjang
</span><span class='line'>
</span><span class='line'>2560x1440
</span><span class='line'>  - 25: 117
</span><span class='line'>  - 27: 108
</span><span class='line'>  - 32: 92
</span><span class='line'>
</span><span class='line'>4K
</span><span class='line'>  - 34: 86
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>Untuk kondisi sekarang, ukurang yang ideal adalah 24-25 dengan resolusi FHD. Lebih tinggi dari itu,
memang space nya cukup lapang (resolusinya lebih tinggi), namun sayangkan ppi terlalu kecil untuk
saya.</p>

<p>Ya begitulah.</p>

<p>Tentu saja, ppi yang nyaman untuk setiap orang berbeda-beda :D</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2016/how-to-google/">Cara Googling</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2016-07-16T22:25:00+00:00" pubdate data-updated="true">Jul 16<span>th</span>, 2016</time>
        
         | <a href="/blog/2016/how-to-google/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Beberapa orang mengeluhkan kepada saya karena gagal menemukan masalah
pemrograman apa yang ingin dicari di Google. Berikut adalah panduan singkat
berdasarkan keluhan-keluhan yang coba saya pahami.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2016/how-to-google/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2019 - Mufid -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'fidblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'https://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
